<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>I Have Never Game</title>
  <link rel="stylesheet" href="style.css" />

</head>
<body>

  <!-- Takaisin-nappi n√§kyy kaikilla sivuilla -->
  <button class="back-button hidden" onclick="goBack()">‚Üê</button>

  <!-- Tervetuloa-n√§ytt√∂ -->
  <div class="screen" id="welcome-screen">
    <h1>Welcome!</h1>
    <p>This is the "I Have Never" game.<br>Hope you enjoy!</p>
    <button onclick="showScreen('instructions')">Instructions</button>
    <button onclick="showScreen('add-players')">Get Started</button>
    <button onclick="generateQR()">Share Game</button>

  </div>

  <!-- Ohjeet-n√§ytt√∂ -->
  <div class="screen hidden" id="instructions">
    <h2>Instructions</h2>
    <p>Each player takes turns saying something they have never done. If other players have done it, they take a point (or a drink üòÑ).</p>
    <button onclick="showScreen('welcome-screen')">Back to Welcome</button>
  </div>

  <!-- QR-koodi ja jaettava linkki -->
<div id="qr-section" class="screen hidden">
  <h2>Share the Game</h2>
  <p>Scan the QR code or share the link below to join:</p>
  <canvas id="qrcode"></canvas>
  <p id="qr-url"></p>
  <button onclick="showScreen('welcome-screen')">Back to Welcome</button>
</div>


  <!-- Pelaajien lis√§√§minen -->
  <div class="screen hidden" id="add-players">
    <h2>Add players</h2>
    <div id="player-list">
      <!-- Pelaajapainikkeet ilmestyv√§t t√§nne -->
    </div>
    <input type="text" id="player-name-input" placeholder="Enter player name" />
    <button onclick="addPlayer()">Add Player</button>
    <button onclick="showScreen('choose-game')">Next</button>
  </div>

  <!-- Mahdollinen seuraava n√§ytt√∂ (placeholder) -->
  <div class="screen hidden" id="choose-game">
    <h2>Choose game mode</h2>
<p>Select one or more game modes:</p>
<div class="mode-selection">
  <label class="mode-option">
    <input type="checkbox" name="mode" value="workAndSchool" hidden>
    <span>Work & School</span>
  </label>
  <label class="mode-option">
    <input type="checkbox" name="mode" value="embarrassingMoments" hidden>
    <span>Embarrassing & Awkward Moments</span>
  </label>
  <label class="mode-option">
    <input type="checkbox" name="mode" value="travelAdventure" hidden>
    <span>Travel & Adventure</span>
  </label>
  <label class="mode-option">
    <input type="checkbox" name="mode" value="relationshipDating" hidden>
    <span>Relationship & Dating</span>
  </label>
  <label class="mode-option">
    <input type="checkbox" name="mode" value="partyFun" hidden>
    <span>Party & Fun</span>
  </label>
  <label class="mode-option">
    <input type="checkbox" name="mode" value="moneyShopping" hidden>
    <span>Money & Shopping</span>
  </label>
  <label class="mode-option">
    <input type="checkbox" name="mode" value="girlsNight" hidden>
    <span>Girls' Night</span>
  </label>
  <label class="mode-option">
    <input type="checkbox" name="mode" value="all" hidden>
    <span>All (includes all categories)</span>
  </label>
</div>
<br>
<button type="button" onclick="startGame()">Start Game</button>




    <button onclick="showScreen('welcome-screen')">Back to Welcome</button>
  </div>

  <!-- Pelin kysymykset -->
  <div class="screen hidden" id="game-screen">
    <h2 id="game-mode-title">Game Question</h2>
    <p id="game-question"></p>
    <button onclick="nextQuestion()">Next Question</button>
  </div>

  <!-- JavaScript -->
  <script>
    let players = [];
    let screenHistory = [];
    let selectedModes = [];
    let currentQuestionIndex = 0;
    let questions = [];

    function showScreen(id) {
      const currentVisible = document.querySelector('.screen:not(.hidden)');
      if (currentVisible) {
        screenHistory.push(currentVisible.id);
      }

      document.querySelectorAll('.screen').forEach(screen => screen.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');

      document.querySelector('.back-button').classList.toggle('hidden', screenHistory.length === 0);
    }

    function goBack() {
      if (screenHistory.length > 0) {
        const previousScreen = screenHistory.pop();
        document.querySelectorAll('.screen').forEach(screen => screen.classList.add('hidden'));
        document.getElementById(previousScreen).classList.remove('hidden');
        document.querySelector('.back-button').classList.toggle('hidden', screenHistory.length === 0);
      }
    }

    function addPlayer() {
      const playerNameInput = document.getElementById('player-name-input');
      const playerName = playerNameInput.value.trim();
      if (playerName) {
        players.push(playerName);
        updatePlayerList();
        playerNameInput.value = '';
      } else {
        alert('Please enter a player name.');
      }
    }

    function updatePlayerList() {
      const playerList = document.getElementById('player-list');
      playerList.innerHTML = '';

      players.forEach((player, index) => {
        const playerItem = document.createElement('div');
        playerItem.className = 'player-item';

        const nameSpan = document.createElement('span');
        nameSpan.textContent = player;

        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-btn';
        removeBtn.textContent = 'X';
        removeBtn.onclick = () => {
          players.splice(index, 1);
          updatePlayerList();
        };

        playerItem.appendChild(nameSpan);
        playerItem.appendChild(removeBtn);
        playerList.appendChild(playerItem);
      });
    }

    function startGame() {
      selectedModes = [];
      document.querySelectorAll('input[name="mode"]:checked').forEach(checkbox => {
        selectedModes.push(checkbox.value);
      });

      if (selectedModes.length > 0) {
        fetchQuestions();
        showScreen('game-screen');
      } else {
        alert('Please select at least one game mode.');
      }
    }

    function fetchQuestions() {
      fetch('data.json')
        .then(response => response.json())
        .then(data => {
          questions = [];
          selectedModes.forEach(mode => {
            if (data[mode]) {
              questions = questions.concat(data[mode]);
            }
          });
          showQuestion();
        })
        .catch(error => {
          console.error('Error loading questions:', error);
        });
    }

    function showQuestion() {
      if (currentQuestionIndex < questions.length) {
        document.getElementById('game-question').innerText = questions[currentQuestionIndex];
      } else {
        alert('No more questions!');
      }
    }

    function nextQuestion() {
      currentQuestionIndex++;
      showQuestion();
    }
  </script>
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
<div id="qrcode"></div>

<script>
  const playerName = "Inka";  // T√§m√§ voisi tulla input-kent√§st√§
  const gameId = "1234";      // Voit generoida satunnaisesti

  const url = `https://inkakatariina.github.io/NeverHaveIEver/game.html?game=${gameId}&player=${encodeURIComponent(playerName)}`;
  QRCode.toCanvas(document.getElementById('qrcode'), url, function (error) {
    if (error) console.error(error);
  });

  function generateQR() {
  const playerName = "Inka"; // Voit my√∂hemmin ottaa sy√∂tteen√§
  const gameId = "1234"; // Voit tehd√§ my√∂s satunnaisen
  const url = `https://sinunsivusi.fi/game.html?game=${gameId}&player=${encodeURIComponent(playerName)}`;
  
  QRCode.toCanvas(document.getElementById('qrcode'), url, function (error) {
    if (error) console.error(error);
  });

  document.getElementById('qr-url').innerText = url;
  showScreen('qr-section');
}

</script>



</body>
</html>
